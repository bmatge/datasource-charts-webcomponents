<!DOCTYPE html>
<html lang="fr" data-fr-theme>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guide utilisateur - gouv-widgets</title>
  <style>@view-transition{navigation:auto}app-header:not(:defined){display:block;min-height:56px}app-footer:not(:defined){display:block;min-height:48px}</style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/utility/utility.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css">
  <script type="module" src="/dist/gouv-widgets.esm.js"></script>
  <style>
    .guide-layout {
      display: flex;
      gap: 2rem;
    }
    .guide-sidemenu {
      flex: 0 0 280px;
      position: sticky;
      top: 1rem;
      height: fit-content;
      max-height: calc(100vh - 2rem);
      overflow-y: auto;
    }
    .guide-content {
      flex: 1;
      min-width: 0;
    }
    @media (max-width: 992px) {
      .guide-layout {
        flex-direction: column;
      }
      .guide-sidemenu {
        position: static;
        flex: none;
        max-height: none;
      }
    }
    .guide-content img {
      max-width: 100%;
      height: auto;
      border: 1px solid var(--border-default-grey);
      border-radius: 4px;
      margin: 1rem 0;
    }
    .guide-content .user-story {
      background: var(--background-alt-blue-france);
      border-left: 4px solid var(--border-action-high-blue-france);
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 0 4px 4px 0;
    }
    .guide-content .user-story strong {
      color: var(--text-action-high-blue-france);
    }
    .guide-content .guide-note {
      background: var(--background-alt-grey);
      padding: 1rem 1.5rem;
      border-radius: 4px;
      margin: 1rem 0;
    }
    .guide-content h2 {
      padding-top: 2rem;
      border-top: 1px solid var(--border-default-grey);
      margin-top: 3rem;
    }
    .guide-content h2:first-of-type {
      border-top: none;
      margin-top: 0;
      padding-top: 0;
    }
    .guide-content h3 {
      margin-top: 2rem;
    }
    .guide-content pre {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 1rem;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.85rem;
      overflow-x: auto;
      white-space: pre-wrap;
    }
    .guide-content ol, .guide-content ul {
      margin: 0.5rem 0 1rem 1.5rem;
    }
    .guide-content li {
      margin-bottom: 0.25rem;
    }
    .fr-sidemenu__link[aria-current="true"] {
      font-weight: 700;
      color: var(--text-action-high-blue-france);
    }
  </style>
</head>
<body>
  <app-header current-page="guide" base-path="../"></app-header>

  <main class="fr-container fr-py-4w" id="main-content">
    <div class="guide-layout">

      <!-- Sidemenu -->
      <nav class="fr-sidemenu guide-sidemenu" role="navigation" aria-labelledby="guide-sidemenu-title">
        <div class="fr-sidemenu__inner">
          <button class="fr-sidemenu__btn" hidden aria-controls="guide-sidemenu-wrapper" aria-expanded="true">
            Menu
          </button>
          <div class="fr-collapse" id="guide-sidemenu-wrapper">
            <div class="fr-sidemenu__title" id="guide-sidemenu-title">Guide utilisateur</div>
            <ul class="fr-sidemenu__list">
              <li class="fr-sidemenu__item">
                <a class="fr-sidemenu__link" href="#overview" data-guide-link>Vue d'ensemble</a>
              </li>
              <li class="fr-sidemenu__item">
                <button class="fr-sidemenu__btn" aria-expanded="true" aria-controls="guide-parcours">
                  Parcours utilisateur
                </button>
                <div class="fr-collapse fr-collapse--expanded" id="guide-parcours">
                  <ul class="fr-sidemenu__list">
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#parcours-a" data-guide-link>Donnees locales</a>
                    </li>
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#parcours-b" data-guide-link>Grist dynamique</a>
                    </li>
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#parcours-c" data-guide-link>Builder IA</a>
                    </li>
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#parcours-d" data-guide-link>Playground</a>
                    </li>
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#parcours-e" data-guide-link>Dashboard</a>
                    </li>
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#parcours-f" data-guide-link>API REST</a>
                    </li>
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#parcours-g" data-guide-link>Monitoring</a>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="fr-sidemenu__item">
                <button class="fr-sidemenu__btn" aria-expanded="false" aria-controls="guide-exemples">
                  Exemples d'implementations
                </button>
                <div class="fr-collapse" id="guide-exemples">
                  <ul class="fr-sidemenu__list">
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#exemples-direct" data-guide-link>Mode direct</a>
                    </li>
                    <li class="fr-sidemenu__item">
                      <a class="fr-sidemenu__link" href="#exemples-query" data-guide-link>Avec requete</a>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="fr-sidemenu__item">
                <a class="fr-sidemenu__link" href="#composants" data-guide-link>Composants de reference</a>
              </li>
              <li class="fr-sidemenu__item">
                <a class="fr-sidemenu__link" href="#integration" data-guide-link>Integration rapide</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Contenu principal -->
      <div class="guide-content">

        <!-- Vue d'ensemble -->
        <section id="overview">
          <h1><i class="ri-book-open-line fr-mr-1w"></i>Guide utilisateur — gouv-widgets</h1>
          <p class="fr-text--lead">
            Ce guide presente les principaux parcours d'utilisation de <strong>gouv-widgets</strong>, une bibliotheque de Web Components de dataviz pour les sites gouvernementaux francais, conforme au DSFR.
          </p>
          <p>Chaque parcours est presente comme une <strong>user story</strong> :</p>
          <div class="user-story">
            <strong>Pour</strong> [objectif metier], <strong>je dois</strong> [etapes concretes], <strong>afin de</strong> [resultat d'integration].
          </div>

          <h2>L'interface</h2>
          <p>L'application est accessible depuis la page d'accueil qui regroupe tous les outils :</p>
          <img src="images/guide-hub.png" alt="Page d'accueil gouv-widgets">
          <p>Les outils disponibles sont :</p>
          <ul>
            <li><strong>Sources</strong> : connecter et gerer les sources de donnees (Grist, API, manuelles)</li>
            <li><strong>Builder</strong> : generateur visuel de graphiques pas-a-pas</li>
            <li><strong>Builder IA</strong> : generateur de graphiques par conversation avec l'IA Albert</li>
            <li><strong>Playground</strong> : editeur de code interactif avec apercu temps reel</li>
            <li><strong>Dashboard</strong> : editeur visuel de tableaux de bord multi-widgets</li>
            <li><strong>Monitoring</strong> : suivi des deployements de widgets en production</li>
          </ul>
        </section>

        <!-- Parcours A -->
        <section id="parcours-a">
          <h2>Creer un graphique a partir de donnees locales</h2>
          <div class="user-story">
            <strong>Pour</strong> afficher un graphique en barres du PIB par region sur mon site,
            <strong>je dois</strong> creer une source de donnees manuelle dans Sources puis configurer le graphique dans le Builder,
            <strong>afin d'</strong>obtenir un code HTML copier-coller integrable dans n'importe quelle page web.
          </div>

          <h3>Etape 1 — Ouvrir la page Sources</h3>
          <p>Naviguez vers <strong>Sources</strong> depuis le menu. La page affiche les connexions existantes (Grist, API) et les sources sauvegardees. Cliquez sur <strong>"Creer une source manuelle"</strong>.</p>
          <img src="images/guide-A1-sources-overview.png" alt="Page Sources — vue d'ensemble">

          <h3>Etape 2 — Saisir les donnees</h3>
          <p>La modale de creation s'ouvre avec trois modes de saisie : <strong>Tableau</strong> (saisie directe), <strong>JSON</strong> (coller du JSON) ou <strong>CSV</strong> (importer un fichier).</p>
          <ol>
            <li>Donnez un nom a la source (ex: "Statistiques regions")</li>
            <li>Remplissez le tableau avec vos donnees</li>
            <li>Cliquez sur <strong>Sauvegarder</strong></li>
          </ol>
          <img src="images/guide-A2-sources-manual-modal.png" alt="Modale de source manuelle">

          <h3>Etape 3 — Ouvrir le Builder et charger la source</h3>
          <p>Naviguez vers le <strong>Builder</strong>. Dans l'etape 1 "Source de donnees", selectionnez votre source dans la dropdown puis cliquez sur <strong>Charger</strong>. Les champs disponibles apparaissent dans les selecteurs.</p>
          <img src="images/guide-A3-builder-source-loaded.png" alt="Builder — source chargee">

          <h3>Etape 4 — Choisir le type de graphique</h3>
          <p>L'etape 2 propose une grille de 11 types de graphiques : barres, lignes, camembert, radar, carte, KPI, tableau, etc. Cliquez sur le type souhaite (ici <strong>Barres</strong>).</p>
          <img src="images/guide-A4-builder-chart-type.png" alt="Builder — choix du type">

          <h3>Etape 5 — Configurer et generer</h3>
          <p>Completez la configuration :</p>
          <ul>
            <li><strong>Axe X</strong> : le champ de categorie (ex: <code>region</code>)</li>
            <li><strong>Axe Y</strong> : le champ numerique (ex: <code>PIB</code>)</li>
            <li><strong>Agregation</strong> : moyenne, somme, comptage, min, max</li>
            <li><strong>Titre et sous-titre</strong> dans l'onglet Apparence</li>
          </ul>
          <p>Puis cliquez sur <strong>Generer le graphique</strong>.</p>
          <img src="images/guide-A5-builder-generated.png" alt="Builder — configuration complete">

          <h3>Etape 6 — Copier le code genere</h3>
          <p>Basculez sur l'onglet <strong>Code genere</strong> dans le panneau de droite. Le code HTML complet est affiche, pret a etre copie. Cliquez sur <strong>Copier le code</strong> pour l'integrer dans votre page.</p>
          <img src="images/guide-A7-builder-code.png" alt="Builder — code genere">
          <p>Le code genere est autonome : il inclut les balises DSFR Chart (<code>&lt;bar-chart&gt;</code>, <code>&lt;line-chart&gt;</code>, etc.) avec les donnees en attributs, ainsi que les liens vers les CSS et JS necessaires.</p>
        </section>

        <!-- Parcours B -->
        <section id="parcours-b">
          <h2>Creer un graphique dynamique depuis Grist</h2>
          <div class="user-story">
            <strong>Pour</strong> afficher un graphique alimente en temps reel par une table Grist,
            <strong>je dois</strong> connecter mon instance Grist dans Sources puis generer un graphique en mode dynamique dans le Builder,
            <strong>afin d'</strong>obtenir un widget HTML qui se met a jour automatiquement depuis Grist.
          </div>

          <h3>Etape 1 — Creer une connexion Grist</h3>
          <p>Dans <strong>Sources</strong>, cliquez sur <strong>Nouvelle connexion</strong>. Selectionnez le type <strong>Grist</strong> et renseignez :</p>
          <ol>
            <li>Le nom de la connexion</li>
            <li>L'URL du serveur Grist (ex: <code>https://grist.numerique.gouv.fr</code>)</li>
            <li>Cochez "Document public" si le document est partage publiquement, sinon entrez votre cle API</li>
          </ol>
          <p>Cliquez sur <strong>Tester et sauvegarder</strong>.</p>
          <img src="images/guide-B1-sources-grist-modal.png" alt="Connexion Grist">

          <h3>Etape 2 — Explorer les donnees Grist</h3>
          <p>Une fois connecte, cliquez sur la connexion dans la barre laterale. L'explorateur affiche les documents et tables disponibles. L'onglet <strong>Apercu</strong> permet de previsualiser les donnees.</p>
          <img src="images/guide-B2-sources-grist-explorer.png" alt="Explorateur Grist">

          <h3>Etape 3 — Activer le mode dynamique dans le Builder</h3>
          <p>Dans le <strong>Builder</strong>, selectionnez la source Grist et chargez les champs. Une section supplementaire apparait : <strong>Mode de generation</strong>. Selectionnez <strong>Chargement dynamique</strong> pour que le code genere interroge Grist en temps reel.</p>
          <img src="images/guide-B3-builder-dynamic-mode.png" alt="Mode dynamique">
          <ul>
            <li><strong>Donnees integrees</strong> : les donnees sont copiees en dur dans le HTML (statique)</li>
            <li><strong>Chargement dynamique</strong> : utilise <code>&lt;gouv-source&gt;</code> + <code>&lt;gouv-query&gt;</code> + <code>&lt;gouv-dsfr-chart&gt;</code> pour charger les donnees en temps reel</li>
          </ul>

          <h3>Etape 4 — Code genere avec composants dynamiques</h3>
          <p>Apres avoir configure et genere le graphique, le code genere contient les Web Components gouv-widgets :</p>
          <img src="images/guide-B4-builder-grist-code.png" alt="Code dynamique Grist">
          <p>Le code genere ressemble a :</p>
<pre>&lt;gouv-source id="data" url="https://grist.numerique.gouv.fr/api/docs/xxx/tables/yyy/records"
             transform="records[].fields"&gt;&lt;/gouv-source&gt;
&lt;gouv-query id="query-result" source="data" group-by="Pays" aggregate="PIB:avg" order-by="value:desc"&gt;&lt;/gouv-query&gt;
&lt;gouv-dsfr-chart source="query-result" type="bar" label-field="Pays" value-field="PIB"
                 title="PIB par pays"&gt;&lt;/gouv-dsfr-chart&gt;</pre>
        </section>

        <!-- Parcours C -->
        <section id="parcours-c">
          <h2>Generer un graphique avec l'IA (Builder IA)</h2>
          <div class="user-story">
            <strong>Pour</strong> generer rapidement un graphique en decrivant ce que je veux en langage naturel,
            <strong>je dois</strong> selectionner une source de donnees puis discuter avec l'assistant Albert IA,
            <strong>afin d'</strong>obtenir un graphique et son code sans ecrire de configuration manuelle.
          </div>

          <h3>Etape 1 — Charger une source et ouvrir le chat</h3>
          <p>Dans le <strong>Builder IA</strong>, selectionnez une source de donnees et cliquez sur <strong>Charger</strong>. L'interface se compose de deux zones :</p>
          <ol>
            <li>Le panneau de configuration et le <strong>chat IA</strong> a gauche</li>
            <li>Le panneau d'<strong>apercu</strong>, <strong>code</strong> et <strong>donnees</strong> a droite</li>
          </ol>
          <img src="images/guide-C1-builder-ia-overview.png" alt="Builder IA — vue d'ensemble">

          <h3>Etape 2 — Decrire le graphique souhaite</h3>
          <p>Ecrivez dans le chat ce que vous souhaitez, en langage naturel. Par exemple :</p>
          <div class="guide-note">
            "Fais-moi un graphique en barres des beneficiaires par region"
          </div>
          <p>L'IA analyse les champs disponibles dans vos donnees et genere la configuration correspondante. Elle propose ensuite des <strong>suggestions</strong> pour affiner le resultat.</p>
          <img src="images/guide-C2-builder-ia-chat.png" alt="Chat IA">

          <h3>Etape 3 — Iterer et exporter</h3>
          <p>L'IA repond avec :</p>
          <ul>
            <li>Le graphique genere dans l'<strong>apercu</strong></li>
            <li>L'action executee (en JSON)</li>
            <li>Des <strong>suggestions</strong> pour modifier le graphique ("Passe en camembert", "Filtre sur IDF", etc.)</li>
          </ul>
          <p>Vous pouvez continuer la conversation pour ajuster le graphique, puis copier le code depuis l'onglet <strong>Code genere</strong>.</p>
          <img src="images/guide-C3-builder-ia-result.png" alt="Builder IA — resultat">
          <div class="guide-note">
            <strong>Note</strong> : le Builder IA utilise l'API Albert (IA souveraine de l'Etat). Un token API Albert est necessaire, configurable dans la section "Configuration Albert IA".
          </div>
        </section>

        <!-- Parcours D -->
        <section id="parcours-d">
          <h2>Prototyper avec le Playground</h2>
          <div class="user-story">
            <strong>Pour</strong> tester et modifier du code de composants gouv-widgets en temps reel,
            <strong>je dois</strong> utiliser le Playground avec ses exemples precharges ou ecrire mon propre code,
            <strong>afin de</strong> prototyper rapidement des visualisations avant de les integrer.
          </div>

          <h3>Etape 1 — Charger un exemple</h3>
          <p>Le <strong>Playground</strong> est un editeur de code split avec un apercu en temps reel. Un selecteur d'exemples propose des modeles classes en 3 categories :</p>
          <ul>
            <li><strong>Composants gouv-widgets</strong> : <code>gouv-source</code> + <code>gouv-query</code> + <code>gouv-dsfr-chart</code> (barres, camembert, lignes), <code>gouv-kpi</code>, <code>gouv-datalist</code>, dashboard complet</li>
            <li><strong>DSFR Chart natifs</strong> : composants DSFR (barres, lignes, camembert, jauge, radar, carte)</li>
          </ul>
          <img src="images/guide-D1-playground-overview.png" alt="Playground — vue d'ensemble">

          <h3>Etape 2 — Executer et visualiser</h3>
          <p>Selectionnez un exemple (ici "DSFR Bar Chart") et cliquez sur <strong>Executer</strong>. Le code a gauche est rendu en temps reel dans l'apercu a droite.</p>
          <img src="images/guide-D2-playground-dsfr-bar.png" alt="Playground — DSFR Bar Chart">
          <p>L'exemple ci-dessus charge les prix moyens du controle technique par region depuis l'API data.economie.gouv.fr et les affiche avec un composant <code>&lt;bar-chart&gt;</code> DSFR natif.</p>

          <h3>Etape 3 — Modifier et sauvegarder</h3>
          <p>Modifiez le code dans l'editeur (theme Dracula), puis :</p>
          <ol>
            <li>Cliquez sur <strong>Executer</strong> (ou <code>Ctrl+Entree</code>) pour voir le resultat</li>
            <li>Cliquez sur <strong>Copier</strong> pour copier le code</li>
            <li>Cliquez sur <strong>Favoris</strong> pour sauvegarder dans vos favoris</li>
          </ol>
          <img src="images/guide-D3-playground-dashboard.png" alt="Playground — dashboard gouv-widgets">

          <h3>Etape 4 — Tester les composants gouv-widgets</h3>
          <p>L'exemple "gouv-source + gouv-dsfr-chart" montre comment connecter une source de donnees a un graphique DSFR via les Web Components :</p>
          <img src="images/guide-D4-playground-gouv-source.png" alt="Playground — gouv-source + chart">
        </section>

        <!-- Parcours E -->
        <section id="parcours-e">
          <h2>Composer un tableau de bord</h2>
          <div class="user-story">
            <strong>Pour</strong> assembler plusieurs visualisations dans un tableau de bord,
            <strong>je dois</strong> utiliser l'editeur de Dashboard pour glisser-deposer des widgets et les configurer,
            <strong>afin d'</strong>obtenir une page de dashboard exportable en HTML.
          </div>

          <h3>Etape 1 — Decouvrir l'editeur de dashboard</h3>
          <p>Le <strong>Dashboard</strong> est un editeur visuel avec :</p>
          <ul>
            <li>A gauche : la <strong>bibliotheque de widgets</strong> (KPI, Graphique, Tableau, Texte), les <strong>favoris</strong> sauvegardes, et les reglages de <strong>grille</strong></li>
            <li>Au centre : la <strong>grille de placement</strong> avec des zones de depot</li>
          </ul>
          <img src="images/guide-E1-dashboard-overview.png" alt="Dashboard — vue d'ensemble">

          <h3>Etape 2 — Placer des widgets</h3>
          <p>Glissez un widget depuis la bibliotheque ou un favori vers une cellule de la grille. Chaque widget peut etre configure en cliquant dessus.</p>
          <p>La barre d'outils permet de :</p>
          <ul>
            <li><strong>Nouveau</strong> / <strong>Ouvrir</strong> / <strong>Sauvegarder</strong> un dashboard</li>
            <li><strong>Exporter HTML</strong> : telecharger le dashboard en page HTML autonome</li>
            <li><strong>Apercu</strong> : voir le rendu final dans un navigateur</li>
          </ul>
          <img src="images/guide-E4-dashboard-toolbar.png" alt="Dashboard — barre d'outils">

          <h3>Etape 3 — Configurer la grille</h3>
          <p>La section <strong>Grille</strong> dans la barre laterale permet d'ajuster :</p>
          <ul>
            <li>Le nombre de <strong>colonnes</strong> (1 a 4)</li>
            <li>L'<strong>espacement</strong> entre les widgets (Normal ou Sans)</li>
          </ul>
          <p>Chaque ligne peut avoir un nombre de colonnes different, permettant des layouts complexes (ex: 3 KPI en ligne 1, 2 graphiques en ligne 2).</p>
          <img src="images/guide-E3-dashboard-sidebar.png" alt="Dashboard — barre laterale">
          <p>Les onglets <strong>Code genere</strong> et <strong>JSON</strong> permettent de recuperer le code HTML ou la configuration JSON du dashboard.</p>
        </section>

        <!-- Parcours F -->
        <section id="parcours-f">
          <h2>Connecter une API REST externe</h2>
          <div class="user-story">
            <strong>Pour</strong> afficher des donnees issues d'une API publique (data.economie.gouv.fr, data.gouv.fr, etc.),
            <strong>je dois</strong> creer une connexion API dans Sources puis utiliser le Builder pour configurer le graphique,
            <strong>afin de</strong> creer un widget qui interroge l'API en temps reel.
          </div>

          <h3>Etape 1 — Creer une connexion API</h3>
          <p>Dans <strong>Sources</strong>, cliquez sur <strong>Nouvelle connexion</strong> et selectionnez le type <strong>API REST/JSON</strong> :</p>
          <ol>
            <li>Selectionnez le type <strong>API</strong></li>
            <li>Entrez l'<strong>URL de l'API</strong> (ex: <code>https://data.economie.gouv.fr/api/explore/v2.1/catalog/datasets/industrie-du-futur/records</code>)</li>
            <li>Indiquez le <strong>chemin vers les donnees</strong> dans la reponse JSON (ex: <code>results</code> pour OpenDataSoft, <code>data</code> pour tabular-api.data.gouv.fr)</li>
            <li>Cliquez sur <strong>Tester et sauvegarder</strong></li>
          </ol>
          <img src="images/guide-F1-sources-api-modal.png" alt="Connexion API">
          <div class="guide-note">
            <strong>APIs testees :</strong>
            <ul>
              <li>OpenDataSoft : <code>data.economie.gouv.fr</code> (chemin : <code>results</code>)</li>
              <li>Tabular API : <code>tabular-api.data.gouv.fr</code> (chemin : <code>data</code>)</li>
              <li>Grist API : <code>grist.numerique.gouv.fr</code> (chemin : <code>records[].fields</code>)</li>
            </ul>
          </div>

          <h3>Etape 2 — Generer le graphique</h3>
          <p>Dans le <strong>Builder</strong>, selectionnez la source API, choisissez un type de graphique et configurez les champs. Ici, un graphique en lignes des beneficiaires de l'Industrie du futur par region :</p>
          <img src="images/guide-F2-builder-api-chart.png" alt="Builder — graphique API">

          <h3>Etape 3 — Recuperer le code</h3>
          <p>Le code genere inclut soit un fetch direct vers l'API, soit les composants <code>&lt;gouv-source&gt;</code> et <code>&lt;gouv-dsfr-chart&gt;</code> pour un chargement dynamique.</p>
          <img src="images/guide-F3-builder-api-code.png" alt="Builder — code API">
        </section>

        <!-- Parcours G -->
        <section id="parcours-g">
          <h2>Suivre les deployements dans le Monitoring</h2>
          <div class="user-story">
            <strong>Pour</strong> connaitre quels widgets sont deployes et sur quels sites gouvernementaux,
            <strong>je dois</strong> consulter la page Monitoring qui agrege les beacons envoyes par les composants,
            <strong>afin d'</strong>avoir une vue d'ensemble de l'utilisation en production.
          </div>

          <h3>Vue d'ensemble</h3>
          <p>La page <strong>Monitoring</strong> affiche automatiquement les donnees collectees par le systeme de beacons. Chaque composant gouv-widgets envoie un signal au deploiement, permettant de suivre l'utilisation.</p>
          <img src="images/guide-G1-monitoring-overview.png" alt="Monitoring — vue d'ensemble">

          <h3>KPIs de suivi</h3>
          <p>Quatre indicateurs en haut de page resument l'activite :</p>
          <ul>
            <li><strong>Sites deployes</strong> : nombre de domaines uniques utilisant les widgets</li>
            <li><strong>Widgets actifs</strong> : nombre total d'instances de composants</li>
            <li><strong>Appels totaux</strong> : volume cumule de chargements de pages</li>
            <li><strong>Derniere mise a jour</strong> : horodatage de la derniere collecte</li>
          </ul>
          <img src="images/guide-G2-monitoring-kpis.png" alt="Monitoring — KPIs">

          <h3>Filtrer et exporter</h3>
          <p>Le tableau detaille liste chaque deploiement avec le site, la page, le composant utilise, le type de graphique, et les dates d'activite. Vous pouvez :</p>
          <ul>
            <li><strong>Filtrer</strong> par composant ou type de graphique</li>
            <li><strong>Rechercher</strong> un domaine specifique</li>
            <li><strong>Exporter en CSV</strong> pour analyse</li>
            <li><strong>Actualiser</strong> pour recharger les donnees</li>
          </ul>
          <img src="images/guide-G3-monitoring-filters-table.png" alt="Monitoring — filtres et tableau">
        </section>

        <!-- Exemples d'implementations -->
        <section id="exemples">
          <h2>Exemples d'implementations</h2>
          <p>
            20 exemples prets a l'emploi, organises en deux modes de construction.
            Chaque exemple est disponible dans le <a href="../apps/playground/index.html">Playground</a>
            pour le tester et le modifier en temps reel.
          </p>
          <p>Trois sources de donnees publiques sont utilisees en alternance :</p>
          <ul>
            <li><strong>Fiscalite locale</strong> — Taux de taxes foncieres et d'habitation par commune (data.economie.gouv.fr)</li>
            <li><strong>Elus municipaux</strong> — Repertoire national des elus (tabular-api.data.gouv.fr)</li>
            <li><strong>Industrie du futur</strong> — Beneficiaires et investissements par region (data.economie.gouv.fr)</li>
          </ul>

          <!-- Mode direct -->
          <h3 id="exemples-direct">Mode direct : gouv-source &rarr; composant</h3>
          <p>Les donnees de la source sont transmises directement au composant de visualisation, sans transformation intermediaire.</p>

          <h4 id="ex-direct-bar">Barres — Taux de taxe fonciere par commune</h4>
          <p>Graphique en barres affichant les taux de taxe fonciere de 15 communes.
            <a href="../apps/playground/index.html?example=direct-bar" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../fiscalite-locale-des-particuliers/records?limit=15"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="bar"
  label-field="libcom" value-field="taux_global_tfb"
  unit-tooltip="%" selected-palette="categorical"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-bar.png" alt="Barres — Taux de taxe fonciere par commune">

          <h4 id="ex-direct-line">Courbe — Beneficiaires Industrie du futur</h4>
          <p>Courbe du nombre de beneficiaires par departement.
            <a href="../apps/playground/index.html?example=direct-line" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../industrie-du-futur/records?limit=20"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="line"
  label-field="nom_departement" value-field="nombre_beneficiaires"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-line.png" alt="Courbe — Beneficiaires Industrie du futur">

          <h4 id="ex-direct-pie">Camembert — Poids demographique</h4>
          <p>Diagramme circulaire du poids demographique par commune.
            <a href="../apps/playground/index.html?example=direct-pie" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../fiscalite-locale-des-particuliers/records?limit=8"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="pie"
  label-field="libcom" value-field="mpoid"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-pie.png" alt="Camembert — Poids demographique">

          <h4 id="ex-direct-radar">Radar — Beneficiaires par region</h4>
          <p>Graphique radar montrant le profil des beneficiaires.
            <a href="../apps/playground/index.html?example=direct-radar" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../industrie-du-futur/records?limit=6"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="radar"
  label-field="nom_region" value-field="nombre_beneficiaires"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-radar.png" alt="Radar — Beneficiaires par region">

          <h4 id="ex-direct-gauge">Jauge — Taux de taxe fonciere</h4>
          <p>Jauge affichant le taux de taxe fonciere d'une commune (1 enregistrement).
            <a href="../apps/playground/index.html?example=direct-gauge" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../fiscalite-locale-des-particuliers/records?limit=1"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="gauge"
  value-field="taux_global_tfb"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-gauge.png" alt="Jauge — Taux de taxe fonciere">

          <h4 id="ex-direct-scatter">Nuage — Investissement vs participation</h4>
          <p>Nuage de points croisant investissement et participation de l'Etat.
            <a href="../apps/playground/index.html?example=direct-scatter" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../industrie-du-futur/records?limit=100"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="scatter"
  label-field="montant_investissement"
  value-field="montant_participation_etat"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-scatter.png" alt="Nuage — Investissement vs participation">

          <h4 id="ex-direct-barline">Barres + ligne — Investissements</h4>
          <p>Combine barres (investissement) et ligne (participation Etat) via <code>value-field-2</code>.
            <a href="../apps/playground/index.html?example=direct-barline" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../industrie-du-futur/records?limit=15"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="bar-line"
  label-field="nom_departement"
  value-field="montant_investissement"
  value-field-2="montant_participation_etat"
  name='["Investissement", "Participation Etat"]'&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-barline.png" alt="Barres + ligne — Investissements">

          <h4 id="ex-direct-map">Carte — Beneficiaires par departement</h4>
          <p>Carte de France coloree par nombre de beneficiaires, via <code>code-field</code>.
            <a href="../apps/playground/index.html?example=direct-map" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://data.economie.gouv.fr/.../industrie-du-futur/records?limit=100"
  transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-dsfr-chart source="data" type="map"
  code-field="code_departement" value-field="nombre_beneficiaires"
  selected-palette="sequentialAscending"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-direct-map.png" alt="Carte — Beneficiaires par departement">

          <h4 id="ex-direct-kpi">KPI — Indicateurs Industrie du futur</h4>
          <p>Quatre indicateurs cles calcules directement depuis les donnees brutes.
            <a href="../apps/playground/index.html?example=direct-kpi" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data" url="..." transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-kpi source="data" valeur="sum:nombre_beneficiaires"
  label="Total beneficiaires" format="nombre"&gt;&lt;/gouv-kpi&gt;
&lt;gouv-kpi source="data" valeur="avg:nombre_beneficiaires"
  label="Moyenne" format="decimal"&gt;&lt;/gouv-kpi&gt;
&lt;gouv-kpi source="data" valeur="max:montant_investissement"
  label="Investissement max" format="euro" couleur="vert"&gt;&lt;/gouv-kpi&gt;
&lt;gouv-kpi source="data" valeur="count"
  label="Enregistrements" format="nombre"&gt;&lt;/gouv-kpi&gt;</pre>
          <img src="images/guide-ex-direct-kpi.png" alt="KPI — Indicateurs Industrie du futur">

          <h4 id="ex-direct-datalist">Tableau — Registre des elus</h4>
          <p>Tableau interactif avec recherche, filtres, tri et export CSV.
            <a href="../apps/playground/index.html?example=direct-datalist" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://tabular-api.data.gouv.fr/api/resources/.../data/?page_size=50"
  transform="data"&gt;&lt;/gouv-source&gt;

&lt;gouv-datalist source="data"
  colonnes="Nom de l'élu:Nom, Prénom de l'élu:Prenom, Libellé de la fonction:Fonction"
  recherche="true" filtres="Libellé du  département"
  tri="Nom de l'élu:asc" pagination="10" export="csv"&gt;
&lt;/gouv-datalist&gt;</pre>
          <img src="images/guide-ex-direct-datalist.png" alt="Tableau — Registre des elus">

          <!-- Mode avec requete -->
          <h3 id="exemples-query">Avec requete : gouv-source &rarr; gouv-query &rarr; composant</h3>
          <p>Les donnees passent par <code>gouv-query</code> qui les filtre, regroupe et/ou agrege avant de les transmettre au composant de visualisation.</p>

          <h4 id="ex-query-bar">Barres — Beneficiaires agreges par region</h4>
          <p>Regroupe par region et somme les beneficiaires avec <code>group-by</code> + <code>aggregate</code>.
            <a href="../apps/playground/index.html?example=query-bar" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data" url="..." transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-query id="q-bar" source="data"
  group-by="nom_region"
  aggregate="nombre_beneficiaires:sum:beneficiaires"
  order-by="beneficiaires:desc" limit="10"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-bar" type="bar"
  label-field="nom_region" value-field="beneficiaires"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-bar.png" alt="Barres — Beneficiaires agreges par region">

          <h4 id="ex-query-line">Courbe — Taux moyen TFB par region</h4>
          <p>Calcule la moyenne du taux de taxe fonciere par region.
            <a href="../apps/playground/index.html?example=query-line" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data" url="..." transform="results"&gt;&lt;/gouv-source&gt;

&lt;gouv-query id="q-line" source="data"
  group-by="libreg"
  aggregate="taux_global_tfb:avg:taux_moyen"
  order-by="taux_moyen:desc"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-line" type="line"
  label-field="libreg" value-field="taux_moyen" unit-tooltip="%"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-line.png" alt="Courbe — Taux moyen TFB par region">

          <h4 id="ex-query-pie">Camembert — Elus par categorie socio-pro</h4>
          <p>Compte les elus par categorie socio-professionnelle via <code>count</code>.
            <a href="../apps/playground/index.html?example=query-pie" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data"
  url="https://tabular-api.data.gouv.fr/api/resources/.../data/?page_size=100"
  transform="data"&gt;&lt;/gouv-source&gt;

&lt;gouv-query id="q-pie" source="data"
  group-by="Libellé de la catégorie socio-professionnelle"
  aggregate="Code sexe:count:nombre"
  order-by="nombre:desc" limit="8"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-pie" type="pie"
  label-field="Libellé de la catégorie socio-professionnelle"
  value-field="nombre"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-pie.png" alt="Camembert — Elus par categorie socio-pro">

          <h4 id="ex-query-radar">Radar — Investissement moyen par region</h4>
          <p>Calcule l'investissement moyen par region (limite a 6 pour lisibilite).
            <a href="../apps/playground/index.html?example=query-radar" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-query id="q-radar" source="data"
  group-by="nom_region"
  aggregate="montant_investissement:avg:investissement"
  limit="6"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-radar" type="radar"
  label-field="nom_region" value-field="investissement"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-radar.png" alt="Radar — Investissement moyen par region">

          <h4 id="ex-query-gauge">Jauge — Taux moyen TFB regional</h4>
          <p>Calcule la moyenne par region, trie par taux decroissant et prend le premier (limit=1).
            <a href="../apps/playground/index.html?example=query-gauge" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-query id="q-gauge" source="data"
  group-by="libreg"
  aggregate="taux_global_tfb:avg:taux_moyen"
  order-by="taux_moyen:desc" limit="1"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-gauge" type="gauge"
  value-field="taux_moyen"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-gauge.png" alt="Jauge — Taux moyen TFB regional">

          <h4 id="ex-query-scatter">Nuage — TFB vs TH par departement</h4>
          <p>Double agregation : moyenne TFB (axe X) et TH (axe Y) par departement.
            <a href="../apps/playground/index.html?example=query-scatter" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-query id="q-scatter" source="data"
  group-by="libdep"
  aggregate="taux_global_tfb:avg:tfb, taux_global_th:avg:th"
  limit="30"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-scatter" type="scatter"
  label-field="tfb" value-field="th"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-scatter.png" alt="Nuage — TFB vs TH par departement">

          <h4 id="ex-query-barline">Barres + ligne — TFB et TH par region</h4>
          <p>Barres pour le TFB moyen et ligne pour le TH moyen, combines via <code>value-field-2</code>.
            <a href="../apps/playground/index.html?example=query-barline" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-query id="q-barline" source="data"
  group-by="libreg"
  aggregate="taux_global_tfb:avg:tfb, taux_global_th:avg:th"
  order-by="tfb:desc"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-barline" type="bar-line"
  label-field="libreg" value-field="tfb" value-field-2="th"
  name='["Taxe fonciere (TFB)", "Taxe habitation (TH)"]'
  unit-tooltip="%"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-barline.png" alt="Barres + ligne — TFB et TH par region">

          <h4 id="ex-query-map">Carte — Taux TFB par departement</h4>
          <p>Moyenne du taux TFB par code departement, affichee sur la carte de France.
            <a href="../apps/playground/index.html?example=query-map" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-query id="q-map" source="data"
  group-by="dep"
  aggregate="taux_global_tfb:avg:taux"&gt;
&lt;/gouv-query&gt;

&lt;gouv-dsfr-chart source="q-map" type="map"
  code-field="dep" value-field="taux"
  selected-palette="sequentialAscending"&gt;
&lt;/gouv-dsfr-chart&gt;</pre>
          <img src="images/guide-ex-query-map.png" alt="Carte — Taux TFB par departement">

          <h4 id="ex-query-kpi">KPI — Statistiques des elus avec filtre</h4>
          <p>Filtre les Maires et compare le sous-ensemble au total via deux KPI distincts.
            <a href="../apps/playground/index.html?example=query-kpi" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data" url="..." transform="data"&gt;&lt;/gouv-source&gt;

&lt;gouv-query id="q-maires" source="data"
  filter="Libellé de la fonction:contains:Maire"&gt;
&lt;/gouv-query&gt;

&lt;gouv-kpi source="data" valeur="count"
  label="Total des elus" format="nombre"&gt;&lt;/gouv-kpi&gt;
&lt;gouv-kpi source="q-maires" valeur="count"
  label="Dont Maires" format="nombre" couleur="bleu"&gt;&lt;/gouv-kpi&gt;</pre>
          <img src="images/guide-ex-query-kpi.png" alt="KPI — Statistiques des elus avec filtre">

          <h4 id="ex-query-datalist">Tableau — Elus filtres par region</h4>
          <p>Filtre les elus d'Ile-de-France et affiche le resultat dans un tableau interactif.
            <a href="../apps/playground/index.html?example=query-datalist" class="fr-link fr-link--sm">Tester dans le Playground</a>
          </p>
<pre>&lt;gouv-source id="data" url="..." transform="data"&gt;&lt;/gouv-source&gt;

&lt;gouv-query id="q-datalist" source="data"
  filter="Libellé de la région:contains:Ile"&gt;
&lt;/gouv-query&gt;

&lt;gouv-datalist source="q-datalist"
  colonnes="Nom de l'élu:Nom, Prénom de l'élu:Prenom, Libellé de la fonction:Fonction"
  recherche="true" tri="Nom de l'élu:asc" pagination="10" export="csv"&gt;
&lt;/gouv-datalist&gt;</pre>
          <img src="images/guide-ex-query-datalist.png" alt="Tableau — Elus filtres par region">

        </section>

        <!-- Composants de reference -->
        <section id="composants">
          <h2>Composants de reference</h2>

          <h3>gouv-kpi — Indicateurs chiffres</h3>
          <p>Affiche des valeurs numeriques mises en avant (chiffres cles, KPI).</p>
          <img src="images/guide-comp-kpi.png" alt="Demo gouv-kpi">

          <h3>gouv-datalist — Tableau filtrable</h3>
          <p>Tableau de donnees avec recherche, filtres par colonne, tri et export CSV.</p>
          <img src="images/guide-comp-datalist.png" alt="Demo gouv-datalist">

          <h3>gouv-dsfr-chart — Graphiques DSFR</h3>
          <p>Wrapper pour les graphiques DSFR natifs (barres, lignes, camembert, radar, jauge, carte, nuage de points).</p>
          <img src="images/guide-comp-chart.png" alt="Demo gouv-dsfr-chart">

          <h3>gouv-query — Filtrage et agregation</h3>
          <p>Composant invisible de transformation de donnees : filtre, regroupe et agrege les donnees entre la source et l'affichage.</p>
          <img src="images/guide-comp-query.png" alt="Demo gouv-query">
        </section>

        <!-- Integration rapide -->
        <section id="integration">
          <h2>Integration rapide</h2>
          <p>Le code minimal pour integrer un graphique dans votre page :</p>
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang="fr" data-fr-theme&gt;
&lt;head&gt;
  &lt;!-- DSFR --&gt;
  &lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.min.css"&gt;
  &lt;!-- DSFR Chart --&gt;
  &lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr-chart@2.0.4/dist/DSFRChart/DSFRChart.css"&gt;
  &lt;script type="module" src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr-chart@2.0.4/dist/DSFRChart/DSFRChart.js"&gt;&lt;/script&gt;
  &lt;!-- gouv-widgets --&gt;
  &lt;script type="module" src="gouv-widgets.esm.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Source de donnees --&gt;
  &lt;gouv-source id="data"
    url="https://data.economie.gouv.fr/api/explore/v2.1/catalog/datasets/industrie-du-futur/records?limit=100"
    transform="results"&gt;
  &lt;/gouv-source&gt;

  &lt;!-- Filtrage et agregation --&gt;
  &lt;gouv-query id="query-result" source="data"
    group-by="nom_region"
    aggregate="nombre_beneficiaires:sum:beneficiaires"
    order-by="beneficiaires:desc"
    limit="10"&gt;
  &lt;/gouv-query&gt;

  &lt;!-- Graphique DSFR --&gt;
  &lt;gouv-dsfr-chart source="query-result"
    type="bar"
    label-field="nom_region"
    value-field="beneficiaires"
    selected-palette="categorical"&gt;
  &lt;/gouv-dsfr-chart&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
          <p>Ce code :</p>
          <ol>
            <li>Charge les donnees depuis l'API OpenDataSoft</li>
            <li>Les regroupe par region avec une somme des beneficiaires</li>
            <li>Affiche un graphique en barres conforme DSFR</li>
          </ol>
        </section>

        <!-- Ressources -->
        <section id="ressources" class="fr-mt-4w">
          <h2>Ressources</h2>
          <div class="fr-grid-row fr-grid-row--gutters">
            <div class="fr-col-12 fr-col-md-4">
              <div class="fr-card fr-card--no-arrow">
                <div class="fr-card__body">
                  <div class="fr-card__content">
                    <h3 class="fr-card__title">Playground</h3>
                    <p class="fr-card__desc">Editeur de code interactif avec exemples precharges et apercu en temps reel.</p>
                  </div>
                  <div class="fr-card__footer">
                    <a class="fr-btn fr-btn--secondary" href="../apps/playground/index.html">Ouvrir le Playground</a>
                  </div>
                </div>
              </div>
            </div>
            <div class="fr-col-12 fr-col-md-4">
              <div class="fr-card fr-card--no-arrow">
                <div class="fr-card__body">
                  <div class="fr-card__content">
                    <h3 class="fr-card__title">Demo composants</h3>
                    <p class="fr-card__desc">Voir tous les composants avec leurs attributs et exemples interactifs.</p>
                  </div>
                  <div class="fr-card__footer">
                    <a class="fr-btn fr-btn--secondary" href="../demo/index.html">Composants</a>
                  </div>
                </div>
              </div>
            </div>
            <div class="fr-col-12 fr-col-md-4">
              <div class="fr-card fr-card--no-arrow">
                <div class="fr-card__body">
                  <div class="fr-card__content">
                    <h3 class="fr-card__title">DSFR Chart</h3>
                    <p class="fr-card__desc">Documentation officielle des composants graphiques DSFR.</p>
                  </div>
                  <div class="fr-card__footer">
                    <a class="fr-btn fr-btn--secondary" href="https://github.com/GouvernementFR/dsfr-chart" target="_blank" rel="noopener">GitHub DSFR Chart</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

      </div><!-- /guide-content -->
    </div><!-- /guide-layout -->
  </main>

  <app-footer base-path="../"></app-footer>

  <script type="module" src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.module.min.js"></script>
  <script>
    // IntersectionObserver pour mettre en surbrillance la section visible dans le sidemenu
    document.addEventListener('DOMContentLoaded', () => {
      const links = document.querySelectorAll('[data-guide-link]');
      const sections = [];

      links.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
          const section = document.getElementById(href.slice(1));
          if (section) sections.push({ link, section });
        }
      });

      if (!sections.length) return;

      let currentActive = null;

      const observer = new IntersectionObserver((entries) => {
        // Find the first visible section
        let bestEntry = null;
        for (const entry of entries) {
          if (entry.isIntersecting) {
            if (!bestEntry || entry.boundingClientRect.top < bestEntry.boundingClientRect.top) {
              bestEntry = entry;
            }
          }
        }

        if (bestEntry) {
          const match = sections.find(s => s.section === bestEntry.target);
          if (match && match.link !== currentActive) {
            if (currentActive) {
              currentActive.removeAttribute('aria-current');
              currentActive.closest('.fr-sidemenu__item')?.classList.remove('fr-sidemenu__item--active');
            }
            match.link.setAttribute('aria-current', 'true');
            match.link.closest('.fr-sidemenu__item')?.classList.add('fr-sidemenu__item--active');
            currentActive = match.link;
          }
        }
      }, {
        rootMargin: '-80px 0px -60% 0px',
        threshold: 0
      });

      sections.forEach(s => observer.observe(s.section));

      // Activate first section by default
      if (sections.length > 0) {
        sections[0].link.setAttribute('aria-current', 'true');
        sections[0].link.closest('.fr-sidemenu__item')?.classList.add('fr-sidemenu__item--active');
        currentActive = sections[0].link;
      }
    });
  </script>
</body>
</html>
