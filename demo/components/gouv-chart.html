<!DOCTYPE html>
<html lang="fr" data-fr-theme>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>gouv-chart - Composants - gouv-widgets</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.min.css" integrity="sha384-VuzA/gYnk/ZqcT5a/ravR88otj71vNPl/h1JPrKoESV33DCX6SeXIxBcRr5qYPRj" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/utility/utility.min.css" integrity="sha384-YR4AxNhFVy1qsQ0Hp7Rosg06e4sj2m9dLxiYZrtqJ0boIOiDbD8XkIsIPMMkf0VL" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" integrity="sha384-6FSSi597BTd6QcnsBNoLclRKxTOyyYqkaucRjFgCNr8wHVCp0COLClSPY4Vy/bjh" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js" integrity="sha384-NrKB+u6Ts6AtkIhwPixiKTzgSKNblyhlk0Sohlgar9UHUBzai/sgnNNWWd291xqt" crossorigin="anonymous"></script>
  <script type="module" src="/dist/gouv-widgets.esm.js"></script>
  <style>
    body { min-height: 100vh; display: flex; flex-direction: column; }
  </style>
</head>
<body>
  <app-header current-page="composants" base-path="../../"></app-header>

  <gouv-source id="sites" url="/mock-api/data.json" transform="sites"></gouv-source>

  <app-layout-demo title="gouv-chart" icon="ri-bar-chart-box-line" active-path="components/gouv-chart" base-path="../">
    <div slot="content">
      <p class="fr-text--lead">
        Wrapper Chart.js qui connecte les graphiques au systeme <code>gouv-source</code>
        pour une alimentation dynamique des donnees avec support de l'agregation.
      </p>

      <div class="fr-callout fr-callout--blue-france">
        <p class="fr-callout__text">
          Ce composant utilise <a href="https://www.chartjs.org/" target="_blank">Chart.js</a>
          et offre des fonctionnalites avancees : agregation, tri, limitation du nombre d'elements,
          et telechargement en PNG. Il se connecte automatiquement aux sources de donnees
          <code>&lt;gouv-source&gt;</code>.
        </p>
      </div>

      <h2>Attributs</h2>
      <table class="attr-table">
        <thead><tr><th>Attribut</th><th>Type</th><th>Defaut</th><th>Description</th></tr></thead>
        <tbody>
          <tr><td><code>source</code></td><td>String</td><td>-</td><td>ID du <code>&lt;gouv-source&gt;</code> (requis)</td></tr>
          <tr><td><code>type</code></td><td>String</td><td><code>bar</code></td><td>Type de chart : <code>bar</code>, <code>line</code>, <code>pie</code>, <code>doughnut</code>, <code>radar</code></td></tr>
          <tr><td><code>index-axis</code></td><td>String</td><td><code>x</code></td><td>Axe d'index pour les barres : <code>x</code> (vertical) ou <code>y</code> (horizontal)</td></tr>
          <tr><td><code>label-field</code></td><td>String</td><td>-</td><td>Chemin vers le champ label dans les donnees</td></tr>
          <tr><td><code>value-field</code></td><td>String</td><td>-</td><td>Chemin vers le champ valeur dans les donnees</td></tr>
          <tr><td><code>aggregation</code></td><td>String</td><td><code>none</code></td><td>Agregation : <code>none</code>, <code>sum</code>, <code>avg</code>, <code>count</code>, <code>min</code>, <code>max</code></td></tr>
          <tr><td><code>limit</code></td><td>Number</td><td><code>0</code></td><td>Nombre maximum d'elements (0 = tous)</td></tr>
          <tr><td><code>sort-order</code></td><td>String</td><td><code>none</code></td><td>Ordre de tri : <code>none</code>, <code>asc</code>, <code>desc</code></td></tr>
          <tr><td><code>title</code></td><td>String</td><td>-</td><td>Titre du graphique</td></tr>
          <tr><td><code>subtitle</code></td><td>String</td><td>-</td><td>Sous-titre du graphique</td></tr>
          <tr><td><code>color</code></td><td>String</td><td><code>#000091</code></td><td>Couleur principale pour les graphiques monochromes</td></tr>
          <tr><td><code>height</code></td><td>Number</td><td><code>350</code></td><td>Hauteur en pixels (0 = responsive 16:9)</td></tr>
        </tbody>
      </table>

      <h2 class="fr-mt-4w">Exemples</h2>

      <section class="demo-section">
        <h3>1. Graphique en barres verticales</h3>
        <gouv-chart
          source="sites"
          type="bar"
          label-field="nom"
          value-field="score_rgaa"
          title="Scores RGAA par site">
        </gouv-chart>
        <div class="code-block"><pre>&lt;gouv-chart
  source="sites"
  type="bar"
  label-field="nom"
  value-field="score_rgaa"
  title="Scores RGAA par site"&gt;
&lt;/gouv-chart&gt;</pre></div>
      </section>

      <section class="demo-section">
        <h3>2. Graphique en ligne avec sous-titre et couleur personnalisee</h3>
        <gouv-chart
          source="sites"
          type="line"
          label-field="nom"
          value-field="score_dsfr"
          title="Scores DSFR"
          subtitle="Conformite au Design System de l'Etat"
          color="#ce614a">
        </gouv-chart>
        <div class="code-block"><pre>&lt;gouv-chart
  source="sites"
  type="line"
  label-field="nom"
  value-field="score_dsfr"
  title="Scores DSFR"
  subtitle="Conformite au Design System de l'Etat"
  color="#ce614a"&gt;
&lt;/gouv-chart&gt;</pre></div>
      </section>

      <section class="demo-section">
        <h3>3. Diagramme circulaire (Pie)</h3>
        <gouv-chart
          source="sites"
          type="pie"
          label-field="ministere"
          value-field="score_rgaa"
          title="Repartition des scores RGAA">
        </gouv-chart>
        <div class="code-block"><pre>&lt;gouv-chart
  source="sites"
  type="pie"
  label-field="ministere"
  value-field="score_rgaa"
  title="Repartition des scores RGAA"&gt;
&lt;/gouv-chart&gt;</pre></div>
      </section>

      <section class="demo-section">
        <h3>4. Barres horizontales</h3>
        <gouv-chart
          source="sites"
          type="bar"
          index-axis="y"
          label-field="nom"
          value-field="score_rgaa"
          title="Classement des sites"
          color="#009081">
        </gouv-chart>
        <div class="code-block"><pre>&lt;gouv-chart
  source="sites"
  type="bar"
  index-axis="y"
  label-field="nom"
  value-field="score_rgaa"
  title="Classement des sites"
  color="#009081"&gt;
&lt;/gouv-chart&gt;</pre></div>
      </section>

      <section class="demo-section">
        <h3>5. Agregation, tri et limite</h3>
        <p class="fr-text--sm fr-mb-2w">
          Exemple combinant l'agregation par moyenne, le tri decroissant et une limite a 5 elements.
        </p>
        <gouv-chart
          source="sites"
          type="bar"
          label-field="ministere"
          value-field="score_rgaa"
          aggregation="avg"
          sort-order="desc"
          limit="5"
          title="Top 5 ministeres par score RGAA moyen"
          color="#6a6af4">
        </gouv-chart>
        <div class="code-block"><pre>&lt;gouv-chart
  source="sites"
  type="bar"
  label-field="ministere"
  value-field="score_rgaa"
  aggregation="avg"
  sort-order="desc"
  limit="5"
  title="Top 5 ministeres par score RGAA moyen"
  color="#6a6af4"&gt;
&lt;/gouv-chart&gt;</pre></div>
      </section>

      <h2 class="fr-mt-4w">Comparaison : gouv-chart vs gouv-dsfr-chart</h2>
      <div class="fr-table">
        <table>
          <thead>
            <tr>
              <th>Fonctionnalite</th>
              <th>gouv-chart</th>
              <th>gouv-dsfr-chart</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Moteur de rendu</td>
              <td>Chart.js</td>
              <td>DSFR Chart</td>
            </tr>
            <tr>
              <td>Agregation de donnees</td>
              <td>Oui (sum, avg, count, min, max)</td>
              <td>Non</td>
            </tr>
            <tr>
              <td>Tri et limite</td>
              <td>Oui</td>
              <td>Non</td>
            </tr>
            <tr>
              <td>Telechargement PNG</td>
              <td>Oui</td>
              <td>Non</td>
            </tr>
            <tr>
              <td>Conformite DSFR native</td>
              <td>Partielle (couleurs manuelles)</td>
              <td>Complete</td>
            </tr>
            <tr>
              <td>Types de graphiques</td>
              <td>bar, line, pie, doughnut, radar</td>
              <td>bar, line, pie, radar, gauge, scatter</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </app-layout-demo>

  <app-footer base-path="../../"></app-footer>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.module.min.js" integrity="sha384-4dK3hBJJh/bjoOulz9Q1kNO2O09lzuKiFeF5c+0VguV1RT3IiLkv+Pt98Jul84V+" crossorigin="anonymous"></script>
</body>
</html>
